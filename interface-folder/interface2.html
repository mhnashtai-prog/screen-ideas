<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INTUITY - Cambridge B2 Reading Part 5 Test</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --bg-primary: #1a2332;
      --bg-secondary: #243447;
      --card-bg: rgba(255, 255, 255, 0.08);
      --card-border: rgba(255, 255, 255, 0.12);
      --accent-gold: #f4a261;
      --accent-teal: #2dd4bf;
      --accent-lime: #32d74b;
      --accent-orange: #ff9500;
      --accent-brick: #c44536;
      --accent-purple: #8b5cf6;
      --accent-pink: #ec4899;
      --accent-green: #34d399;
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.7);
      --text-muted: rgba(255, 255, 255, 0.5);
      --intuity-gold: #ffd54f;
      --intuity-teal: #26a69a;
      --blur: blur(10px);
      --shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
      --correct-color: #32d74b;
      --incorrect-color: #ff9500;
      --highlight-color: rgba(50, 215, 75, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      color: var(--text-primary);
      height: 100vh;
      line-height: 1.4;
      overflow: hidden;
      touch-action: pan-y;
      font-size: 16px;
    }

    .constellation-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      opacity: 0.2;
    }

    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: var(--accent-gold);
      border-radius: 50%;
      animation: twinkle 3s infinite alternate;
    }

    .star:nth-child(even) {
      animation-delay: 1.5s;
      background: var(--accent-teal);
    }

    @keyframes twinkle {
      0% { opacity: 0.3; }
      100% { opacity: 0.8; }
    }

    /* Header */
    .header {
      position: relative;
      z-index: 100;
      background: rgba(26, 35, 50, 0.95);
      backdrop-filter: var(--blur);
      border-bottom: 1px solid var(--card-border);
      padding: 12px 16px;
      flex-shrink: 0;
    }

    .header-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: relative;
    }

    .brand-name {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.8rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--intuity-gold) 0%, var(--intuity-teal) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 4px;
    }

    .page-title {
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
      font-weight: 500;
    }

    .header-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      position: relative;
    }

    .nav-btn {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      padding: 8px 16px;
      color: var(--text-primary);
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s ease;
      backdrop-filter: var(--blur);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .nav-btn:hover {
      background: var(--accent-gold);
      color: #000;
      transform: translateY(-1px);
    }

    .author-credit {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.75rem;
      color: var(--text-muted);
      font-weight: 300;
      pointer-events: none;
    }

    /* Main Container */
    .main-container {
      position: relative;
      height: calc(100vh - 120px);
      padding: 0;
      z-index: 10;
    }

    /* Reading Passage Area - Full space */
    .reading-container {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: 16px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      padding: 20px;
      padding-bottom: 216px; /* Space for floating question box */
      box-shadow: var(--shadow);
      backdrop-filter: var(--blur);
      overflow-y: auto;
    }

    .reading-content {
      line-height: 1.8;
      font-size: 1rem;
      color: var(--text-primary);
      text-align: left;
      max-width: 100%;
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 400;
      letter-spacing: 0.01em;
    }

    .reading-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 32px;
      color: var(--accent-gold);
      letter-spacing: -0.02em;
    }

    .reading-paragraph {
      margin-bottom: 20px;
      text-indent: 0;
      font-size: 0.95rem;
      line-height: 1.7;
      color: rgba(255, 255, 255, 0.9);
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 400;
    }

    .highlighted-text {
      background: var(--highlight-color);
      padding: 2px 4px;
      border-radius: 3px;
      transition: all 0.3s ease;
    }

    /* Question Area - Floating overlay - Enhanced Size */
    .question-container {
      position: fixed;
      bottom: 32px; /* Above compact footer */
      left: 16px;
      right: 16px;
      height: 216px;
      background: rgba(36, 52, 71, 0.98);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      overflow: hidden;
      backdrop-filter: var(--blur);
      z-index: 50;
      box-shadow: var(--shadow);
    }

    .question-track {
      display: flex;
      width: 800%; /* 8 questions Ã— 100% */
      height: 100%;
      transition: transform 0.3s ease-out;
      will-change: transform;
    }

    .question-track.dragging {
      transition: none;
    }

    .question-slide {
      width: 12.5%; /* 100% / 8 questions */
      height: 100%;
      flex-shrink: 0;
      padding: 12px;
      display: flex;
      flex-direction: column;
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      flex-shrink: 0;
    }

    .question-number {
      font-weight: 400;
      color: var(--accent-gold);
      font-size: 0.7rem;
    }

    .question-progress {
      font-size: 0.65rem;
      color: var(--text-muted);
    }

    .question-text {
      font-size: 0.84rem;
      color: var(--text-primary);
      margin-bottom: 6px;
      line-height: 1.3;
      flex-shrink: 0;
      font-weight: 400;
    }

    .options-container {
      display: flex;
      flex-direction: column;
      gap: 4px;
      flex-grow: 1;
    }

    .option {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--card-border);
      border-radius: 4px;
      padding: 3px 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.78rem;
      line-height: 1.2;
      display: flex;
      align-items: center;
      min-height: 24px;
      max-height: 29px;
      font-weight: 400;
    }

    .option:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: var(--accent-teal);
    }

    .option.selected {
      background: var(--accent-teal);
      color: #000;
      border-color: var(--accent-teal);
    }

    .option.correct {
      background: var(--correct-color);
      color: #000;
      border-color: var(--correct-color);
    }

    .option.incorrect {
      background: var(--incorrect-color);
      color: #000;
      border-color: var(--incorrect-color);
    }

    .option-label {
      font-weight: 500;
      margin-right: 4px;
      min-width: 14px;
      font-size: 0.72rem;
    }

    .option-text {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Question Navigation */
    .question-nav {
      position: absolute;
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 3px;
      z-index: 10;
    }

    .question-indicator {
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .question-indicator.active {
      background: var(--accent-gold);
      transform: scale(1.2);
    }

    /* SUPER COMPACT Footer */
    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 4px 16px;
      background: rgba(26, 35, 50, 0.98);
      backdrop-filter: var(--blur);
      border-top: 1px solid var(--card-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 60;
      min-height: 28px;
    }

    .score-display {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 4px;
      padding: 2px 8px;
      font-weight: 400;
      font-size: 0.75rem;
      color: var(--text-primary);
      min-height: 20px;
      display: flex;
      align-items: center;
    }

    .check-answers-btn {
      background: var(--accent-gold);
      border: none;
      border-radius: 4px;
      padding: 2px 12px;
      color: #000;
      font-weight: 500;
      cursor: pointer;
      font-size: 0.75rem;
      transition: all 0.2s ease;
      min-height: 20px;
      display: flex;
      align-items: center;
    }

    .check-answers-btn:hover {
      background: var(--accent-teal);
      transform: translateY(-1px);
    }

    .check-answers-btn:disabled {
      background: var(--text-muted);
      cursor: not-allowed;
      transform: none;
    }

    /* Mobile Optimizations - Enhanced Sizes */
    @media (max-width: 768px) {
      .brand-name {
        font-size: 1.5rem;
      }

      .reading-container {
        padding: 16px;
        margin: 12px;
        padding-bottom: 192px;
      }

      .question-container {
        bottom: 26px;
        left: 12px;
        right: 12px;
        height: 192px;
      }

      .question-slide {
        padding: 10px;
      }

      .option {
        font-size: 0.83rem;
        padding: 4px 7px;
        min-height: 25px;
        max-height: 30px;
      }

      .question-text {
        font-size: 0.9rem;
      }

      .option-label {
        font-size: 0.76rem;
        min-width: 14px;
      }
    }

    @media (max-width: 480px) {
      .header {
        padding: 10px 12px;
      }

      .brand-name {
        font-size: 1.3rem;
      }

      .nav-btn {
        padding: 6px 12px;
        font-size: 0.8rem;
      }

      .author-credit {
        font-size: 0.7rem;
      }

      .reading-container {
        padding: 12px;
        margin: 8px;
        padding-bottom: 168px;
      }

      .question-container {
        bottom: 24px;
        left: 8px;
        right: 8px;
        height: 168px;
      }

      .option {
        font-size: 0.76rem;
        padding: 3px 6px;
        min-height: 22px;
        max-height: 28px;
      }

      .question-text {
        font-size: 0.83rem;
      }

      .option-label {
        font-size: 0.7rem;
        min-width: 12px;
      }

      .footer {
        padding: 3px 12px;
        min-height: 22px;
      }

      .score-display {
        padding: 1px 6px;
        font-size: 0.7rem;
        min-height: 16px;
      }

      .check-answers-btn {
        padding: 1px 8px;
        font-size: 0.7rem;
        min-height: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="constellation-bg" id="constellation"></div>

  <header class="header">
    <div class="header-content">
      <div class="brand-name">INTUITY</div>
      <div class="page-title">Reading Part 5</div>
      <div class="header-nav">
        <a href="#" class="nav-btn" id="homeBtn">
          <i class="fas fa-home"></i> HOME
        </a>
        <div class="author-credit">by Majid Nashtai</div>
        <a href="#" class="nav-btn" id="backBtn">
          <i class="fas fa-arrow-left"></i> Back
        </a>
      </div>
    </div>
  </header>

  <div class="main-container">
    <!-- Reading Passage Area -->
    <div class="reading-container">
      <div class="reading-content">
        <div class="reading-title">There's no stopping her!</div>
        
        <div class="reading-paragraph">
          Noreen Hannington, a sixty-three-year-old grandmother of five, arrives at the Tyre and Wheel Company in North London at 8 a.m. every morning. She puts on a grease-stained apron, rolls up her sleeves and gets ready for the day's work.
        </div>

        <div class="reading-paragraph">
          The first customer pulls up in an old van. It has a flat tyre and the driver was lucky to make it to the garage. Noreen puts on her rubber gloves and gets down to work. She casually pulls off the wheel, swings it onto the work bench with one hand and takes it apart. 'Here's your problem, sir,' she announces, pointing at a tiny hole in the tyre. Right now, he couldn't care less about that, since what he feels is more serious: a fast-decreasing sense of his own worth. At least his mates haven't come to witness him being rescued by a sweet-faced granny!
        </div>

        <div class="reading-paragraph">
          Why is Noreen in this line of work, anyway? It's a family business and when Noreen's husband died, she decided to keep it going for her two sons, Bill and Fred, then aged only seventeen and fifteen. Before that, her husband had let her watch what went on in the garage, but she had never been allowed to lift a finger. Initially, she doubted her ability to make a go of it, but somehow she managed, and although the boys are now grown up, has never got round to handing over.
        </div>

        <div class="reading-paragraph">
          Now the business has expanded to include not only the sons but daughters-in-law, too. With Noreen in charge, it all runs smoothly. 'Bill handles anything mechanical. Fred does electrical repairs, while I fix flat tyres and anything else to do with wheels.' She waves at the new computer: 'I also do the accounts. They keep on at me to think modern, but we don't need this.' Bill jokes: 'We don't need you, but you're still here!'
        </div>

        <div class="reading-paragraph">
          Noreen is indeed still around, lifting well over twelve kilogrammes in weight up to twenty times a day, which is rather surprising, to say the least. As Bill says, 'Tyre changing's hard and she shouldn't be doing it.' Noreen pulls a face and replies, 'I'll stop when I'm eighty-five. Anyway, it was far worse in the old days, when there was less equipment.' 'And before that, you were repairing the horses and carts,' jokes Bill. We all laugh at that one.
        </div>

        <div class="reading-paragraph">
          Suddenly it all becomes obvious to me â€“ these friendly jokes create an environment that Noreen loves and, despite her advanced age, she wants to stick it out, even if the work is hard at times. So much so, that on the rare occasions when she does go away, she can't wait to return. 'I have just had a wonderful holiday on board a cruise ship. Going to sea made sure I couldn't come running back to the garage after a few hours! But walking back into the garage meant coming home to me,' she says fondly. She stops talking for a moment to check the drinks machine. 'It's out of tea,' she shouts. Everybody sighs; on her first day back at work, the boss is making her presence felt.
        </div>

        <div class="reading-paragraph">
          Surely all this heavy work must affect her health though? Noreen claims that it doesn't, though her daughter-in-law mentions recent back trouble. 'That had nothing to do with the tyres! It was when I was doing those stupid roof tiles,' says Noreen. 'We rebuilt the garage and added a first floor. It was quite a nice change to be a labourer for a while, actually.'
        </div>

        <div class="reading-paragraph">
          Noreen is a delightful woman, who clearly intends to be part of the business for a long time yet.
        </div>
      </div>
    </div>

    <!-- Question Area - Floating overlay -->
    <div class="question-container" id="questionContainer">
      <div class="question-track" id="questionTrack">
        
        <!-- Question 7 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 7</div>
            <div class="question-progress">1/8</div>
          </div>
          <div class="question-text">
            How does the van driver feel after getting help from Noreen?
          </div>
          <div class="options-container">
            <div class="option" data-question="7" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">impressed by the way she works</span>
            </div>
            <div class="option" data-question="7" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">embarrassed that he needed it</span>
            </div>
            <div class="option" data-question="7" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">relieved at finding it in time</span>
            </div>
            <div class="option" data-question="7" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">unconvinced by her advice</span>
            </div>
          </div>
        </div>

        <!-- Question 8 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 8</div>
            <div class="question-progress">2/8</div>
          </div>
          <div class="question-text">
            Why did Noreen take over the running of the business?
          </div>
          <div class="options-container">
            <div class="option" data-question="8" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">to fulfil a promise to her husband</span>
            </div>
            <div class="option" data-question="8" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">to stop her sons fighting over it</span>
            </div>
            <div class="option" data-question="8" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">to make sure it stayed in the family</span>
            </div>
            <div class="option" data-question="8" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">to prove that she could manage it</span>
            </div>
          </div>
        </div>

        <!-- Question 9 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 9</div>
            <div class="question-progress">3/8</div>
          </div>
          <div class="question-text">
            'Keep on at' in line 34 describes a way of
          </div>
          <div class="options-container">
            <div class="option" data-question="9" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">trying to make someone laugh.</span>
            </div>
            <div class="option" data-question="9" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">trying to accept something.</span>
            </div>
            <div class="option" data-question="9" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">trying to convince someone.</span>
            </div>
            <div class="option" data-question="9" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">trying to make something easier.</span>
            </div>
          </div>
        </div>

        <!-- Question 10 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 10</div>
            <div class="question-progress">4/8</div>
          </div>
          <div class="question-text">
            The writer finds it strange that
          </div>
          <div class="options-container">
            <div class="option" data-question="10" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">Bill allows his mother to work at her age.</span>
            </div>
            <div class="option" data-question="10" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">Noreen knows exactly when she will retire.</span>
            </div>
            <div class="option" data-question="10" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">Bill doesn't find a way to help his mother.</span>
            </div>
            <div class="option" data-question="10" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">Noreen does a job that is unsuitable for her.</span>
            </div>
          </div>
        </div>

        <!-- Question 11 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 11</div>
            <div class="question-progress">5/8</div>
          </div>
          <div class="question-text">
            Why, in the writer's opinion, does Noreen want to carry on working at the garage?
          </div>
          <div class="options-container">
            <div class="option" data-question="11" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">She feels that working keeps her young.</span>
            </div>
            <div class="option" data-question="11" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">She enjoys the working atmosphere.</span>
            </div>
            <div class="option" data-question="11" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">She is genuinely interested in the work.</span>
            </div>
            <div class="option" data-question="11" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">She looks forward to more expensive holidays.</span>
            </div>
          </div>
        </div>

        <!-- Question 12 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 12</div>
            <div class="question-progress">6/8</div>
          </div>
          <div class="question-text">
            Why do Noreen's family sigh when she mentions the problem with the drinks machine?
          </div>
          <div class="options-container">
            <div class="option" data-question="12" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">They don't feel responsible for it.</span>
            </div>
            <div class="option" data-question="12" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">They wish they had noticed it first.</span>
            </div>
            <div class="option" data-question="12" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">They realise that she's in control again.</span>
            </div>
            <div class="option" data-question="12" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">They feel that she is being unreasonable.</span>
            </div>
          </div>
        </div>

        <!-- Question 13 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 13</div>
            <div class="question-progress">7/8</div>
          </div>
          <div class="question-text">
            When Noreen hurt her back, she
          </div>
          <div class="options-container">
            <div class="option" data-question="13" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">wasn't able to go on with the building work.</span>
            </div>
            <div class="option" data-question="13" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">missed her usual job of repairing the tyres.</span>
            </div>
            <div class="option" data-question="13" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">annoyed her daughter-in-law.</span>
            </div>
            <div class="option" data-question="13" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">blamed her injury on having to fix the tiles.</span>
            </div>
          </div>
        </div>

        <!-- Question 14 -->
        <div class="question-slide">
          <div class="question-header">
            <div class="question-number">Question 14</div>
            <div class="question-progress">8/8</div>
          </div>
          <div class="question-text">
            Which phrase best describes the writer's view of Noreen?
          </div>
          <div class="options-container">
            <div class="option" data-question="14" data-option="A">
              <span class="option-label">A</span>
              <span class="option-text">a determined woman</span>
            </div>
            <div class="option" data-question="14" data-option="B">
              <span class="option-label">B</span>
              <span class="option-text">a demanding boss</span>
            </div>
            <div class="option" data-question="14" data-option="C">
              <span class="option-label">C</span>
              <span class="option-text">a loving grandmother</span>
            </div>
            <div class="option" data-question="14" data-option="D">
              <span class="option-label">D</span>
              <span class="option-text">a co-operative worker</span>
            </div>
          </div>
        </div>

      </div>

      <!-- Question Navigation Indicators -->
      <div class="question-nav" id="questionNav">
        <div class="question-indicator active" data-question="0"></div>
        <div class="question-indicator" data-question="1"></div>
        <div class="question-indicator" data-question="2"></div>
        <div class="question-indicator" data-question="3"></div>
        <div class="question-indicator" data-question="4"></div>
        <div class="question-indicator" data-question="5"></div>
        <div class="question-indicator" data-question="6"></div>
        <div class="question-indicator" data-question="7"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="score-display" id="scoreDisplay">
      Score: 0/8
    </div>
    <button class="check-answers-btn" id="checkAnswersBtn">
      Check Answers
    </button>
  </footer>

  <script>
    // Global state
    let currentQuestion = 0;
    const totalQuestions = 8;
    let userAnswers = {};
    let correctAnswers = { 7: 'B', 8: 'C', 9: 'C', 10: 'A', 11: 'B', 12: 'C', 13: 'D', 14: 'A' }; // Example answers
    let answersChecked = false;
    let startX = 0;
    let isDragging = false;

    // DOM elements
    const questionContainer = document.getElementById('questionContainer');
    const questionTrack = document.getElementById('questionTrack');
    const questionNav = document.getElementById('questionNav');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const checkAnswersBtn = document.getElementById('checkAnswersBtn');
    const indicators = document.querySelectorAll('.question-indicator');

    // Create constellation background
    function createConstellation() {
      const constellation = document.getElementById('constellation');
      for (let i = 0; i < 25; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 3 + 's';
        constellation.appendChild(star);
      }
    }

    // Update question position
    function updateQuestion() {
      const translateX = -currentQuestion * (100 / totalQuestions);
      questionTrack.style.transform = `translateX(${translateX}%)`;
      
      // Update indicators
      indicators.forEach((indicator, index) => {
        indicator.classList.toggle('active', index === currentQuestion);
      });
    }

    // Navigate to specific question
    function goToQuestion(questionIndex) {
      if (questionIndex < 0 || questionIndex >= totalQuestions) return;
      
      currentQuestion = questionIndex;
      questionTrack.classList.remove('dragging');
      updateQuestion();
    }

    // Handle option selection
    function selectOption(questionNum, option) {
      if (answersChecked) return;
      
      // Remove previous selection for this question
      const questionSlide = document.querySelector(`[data-question="${questionNum}"]`).closest('.question-slide');
      questionSlide.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
      
      // Select new option
      const selectedOption = document.querySelector(`[data-question="${questionNum}"][data-option="${option}"]`);
      selectedOption.classList.add('selected');
      
      // Store answer
      userAnswers[questionNum] = option;
      
      // Update score display
      updateScore();
    }

    // Update score
    function updateScore() {
      const correctCount = Object.keys(userAnswers).filter(q => 
        userAnswers[q] === correctAnswers[q]
      ).length;
      
      scoreDisplay.textContent = `Score: ${correctCount}/${totalQuestions}`;
    }

    // Check answers
    function checkAnswers() {
      answersChecked = true;
      checkAnswersBtn.disabled = true;
      checkAnswersBtn.textContent = 'Answers Checked';
      
      // Mark all options
      for (let questionNum = 7; questionNum <= 14; questionNum++) {
        const questionSlide = document.querySelector(`[data-question="${questionNum}"]`).closest('.question-slide');
        const options = questionSlide.querySelectorAll('.option');
        
        options.forEach(option => {
          const optionLetter = option.getAttribute('data-option');
          const isCorrect = optionLetter === correctAnswers[questionNum];
          const wasSelected = userAnswers[questionNum] === optionLetter;
          
          if (isCorrect) {
            option.classList.add('correct');
          } else if (wasSelected && !isCorrect) {
            option.classList.add('incorrect');
          }
        });
      }
      
      // Highlight text passages (example)
      highlightTextPassages();
      
      // Final score update
      updateScore();
    }

    // Highlight text passages where answers were found
    function highlightTextPassages() {
      const readingContent = document.querySelector('.reading-content');
      const paragraphs = readingContent.querySelectorAll('.reading-paragraph');
      
      // All 8 answer locations with their evidence in the text
      const highlights = [
        {
          // Q7: How does the van driver feel? Answer: B - embarrassed that he needed it
          paragraph: 1,
          text: 'fast-decreasing sense of his own worth',
          question: 'Q7: Driver feels embarrassed'
        },
        {
          // Q8: Why did Noreen take over? Answer: C - to make sure it stayed in the family  
          paragraph: 2,
          text: 'keep it going for her two sons',
          question: 'Q8: Keep business in family'
        },
        {
          // Q9: "Keep on at" meaning? Answer: C - trying to convince someone
          paragraph: 3,
          text: 'They keep on at me to think modern',
          question: 'Q9: Trying to convince meaning'
        },
        {
          // Q10: Writer finds it strange that? Answer: A - Bill allows his mother to work at her age
          paragraph: 4,
          text: "Tyre changing's hard and she shouldn't be doing it",
          question: 'Q10: Strange she works at her age'
        },
        {
          // Q11: Why does Noreen want to carry on? Answer: B - She enjoys the working atmosphere
          paragraph: 5,
          text: 'these friendly jokes create an environment that Noreen loves',
          question: 'Q11: Enjoys work atmosphere'
        },
        {
          // Q12: Why do family sigh about drinks machine? Answer: C - They realise that she's in control again
          paragraph: 5,
          text: 'the boss is making her presence felt',
          question: 'Q12: Boss in control again'
        },
        {
          // Q13: When Noreen hurt her back? Answer: D - blamed her injury on having to fix the tiles
          paragraph: 6,
          text: 'That had nothing to do with the tyres! It was when I was doing those stupid roof tiles',
          question: 'Q13: Blamed tiles for injury'
        },
        {
          // Q14: Writer's view of Noreen? Answer: A - a determined woman
          paragraph: 7,
          text: 'clearly intends to be part of the business for a long time yet',
          question: 'Q14: Determined to continue'
        }
      ];
      
      // Apply highlights to each paragraph
      highlights.forEach(highlight => {
        if (paragraphs[highlight.paragraph]) {
          const paragraph = paragraphs[highlight.paragraph];
          // Add title attribute for tooltip showing which question this relates to
          const highlightSpan = `<span class="highlighted-text" title="${highlight.question}">${highlight.text}</span>`;
          paragraph.innerHTML = paragraph.innerHTML.replace(
            highlight.text,
            highlightSpan
          );
        }
      });
      
      // Log completion for debugging
      console.log('âœ… All 8 answer locations highlighted in lime green');
    }

    // Touch handling for question swiping
    function handleStart(e) {
      isDragging = true;
      startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
      questionTrack.classList.add('dragging');
    }

    function handleMove(e) {
      if (!isDragging) return;
      
      e.preventDefault();
      const currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
      const deltaX = currentX - startX;
      const currentTranslate = -currentQuestion * (100 / totalQuestions);
      const dragPercent = (deltaX / questionContainer.offsetWidth) * 12.5; // 12.5% per slide
      
      questionTrack.style.transform = `translateX(${currentTranslate + dragPercent}%)`;
    }

    function handleEnd(e) {
      if (!isDragging) return;
      
      isDragging = false;
      questionTrack.classList.remove('dragging');
      
      const endX = e.type.includes('mouse') ? e.clientX : e.changedTouches[0].clientX;
      const deltaX = endX - startX;
      const threshold = 50;
      
      if (Math.abs(deltaX) > threshold) {
        if (deltaX > 0 && currentQuestion > 0) {
          // Swipe right - previous question
          goToQuestion(currentQuestion - 1);
        } else if (deltaX < 0 && currentQuestion < totalQuestions - 1) {
          // Swipe left - next question
          goToQuestion(currentQuestion + 1);
        } else {
          updateQuestion();
        }
      } else {
        updateQuestion();
      }
    }

    // Event listeners
    function setupEventListeners() {
      // Option selection
      document.querySelectorAll('.option').forEach(option => {
        option.addEventListener('click', () => {
          const questionNum = option.getAttribute('data-question');
          const optionLetter = option.getAttribute('data-option');
          selectOption(questionNum, optionLetter);
        });
      });
      
      // Question indicators
      indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => goToQuestion(index));
      });
      
      // Check answers button
      checkAnswersBtn.addEventListener('click', checkAnswers);
      
      // Touch events for question swiping
      questionContainer.addEventListener('touchstart', handleStart, { passive: false });
      questionContainer.addEventListener('touchmove', handleMove, { passive: false });
      questionContainer.addEventListener('touchend', handleEnd, { passive: false });
      
      // Mouse events (for desktop testing)
      questionContainer.addEventListener('mousedown', handleStart);
      document.addEventListener('mousemove', handleMove);
      document.addEventListener('mouseup', handleEnd);
      
      // Prevent context menu
      questionContainer.addEventListener('contextmenu', e => e.preventDefault());
      
      // Keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft' && currentQuestion > 0) {
          goToQuestion(currentQuestion - 1);
        } else if (e.key === 'ArrowRight' && currentQuestion < totalQuestions - 1) {
          goToQuestion(currentQuestion + 1);
        } else if (e.key >= '1' && e.key <= '8') {
          goToQuestion(parseInt(e.key) - 1);
        }
      });
    }

    // Initialize the application
    document.addEventListener('DOMContentLoaded', () => {
      createConstellation();
      setupEventListeners();
      updateQuestion();
      updateScore();
    });
  </script>
</body>
</html>
